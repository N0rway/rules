[General]
# CONFIG_FILE (原始配置文件路径)
CONFIG_FILE = /etc/openclash/config/Overwrite-Clash-Bypass.yaml
# CORE_TYPE (核心类型 Smart or Meta)
CORE_TYPE = Meta
# --- DNS 相关 ---
# ENABLE_REDIRECT_DNS (DNS 重定向模式，0：禁用，1：Dnsmasq Redirect, 2：Firewall Redirect)
ENABLE_REDIRECT_DNS = 1
# ENABLE_CUSTOM_DNS (自定义 DNS, 0: 插件不覆写, 1: 启用，使用插件内置规则)
ENABLE_CUSTOM_DNS = 0
# APPEND_DEFAULT_DNS (自动追加 default-nameserver DNS, 0: 插件不覆写, 1: 启用)
APPEND_DEFAULT_DNS = 0
# APPEND_WAN_DNS (追加上游分配 DNS, 0: 插件不覆写, 1: 启用)
APPEND_WAN_DNS = 0
# STORE_FAKEIP (启用 fake-ip 缓存, 0: 插件不覆写, 1: 启用)
STORE_FAKEIP = 1
# CUSTOM_FAKEIP_FILTER (启用 Fake-IP-Filter, 0: 插件不覆写, 1: 启用，使用插件内置规则)
CUSTOM_FAKEIP_FILTER = 1
    # CUSTOM_FAKEIP_FILTER_MODE (Fake-IP 过滤模式, blacklist/whitelist)
    CUSTOM_FAKEIP_FILTER_MODE = blacklist
# FAKEIP_RANGE (自定义 Fake-IP 地址段, 如 198.18.0.1/16)
FAKEIP_RANGE = 198.18.0.1/16
# ENABLE_RESPECT_RULES (DNS 查询是否遵循规则, 0: 插件不覆写, 1: 启用)
ENABLE_RESPECT_RULES = 0
# CUSTOM_NAME_POLICY (自定义 Nameserver-Policy, 0: 插件不覆写, 1: 启用，使用插件内置规则)
CUSTOM_NAME_POLICY = 0
# CUSTOM_HOST (自定义 Hosts, 0: 插件不覆写, 1: 启用，使用插件内置规则)
CUSTOM_HOST = 0
# CUSTOM_FALLBACK_FILTER (自定义 Fallback-Filter, 0: 插件不覆写, 1: 启用，使用插件内置规则)
CUSTOM_FALLBACK_FILTER = 0

# --- IPv6 相关 ---
# IPV6_ENABLE (启用 IPv6，0: 禁用, 1: 启用)
IPV6_ENABLE = 0
# IPV6_DNS (启用 IPv6 DNS，0: 禁用, 1: 启用)
IPV6_DNS = 0
# IPV6_MODE (IPv6 代理模式, 0: TProxy Mode, 1: Redirect Mode, 2: TUN Mode, 3: Mix Mode
# ENABLE_V6_UDP_PROXY (启用 IPv6 UDP 代理，0: 禁用, 1: 启用, only for Redirect Mode and Redirect Mode)

# --- 代理与模式 ---
# EN_MODE (插件运行模式：fake-ip/fake-ip-tun/fake-ip-mix or redir-host/redir-host-tun/redir-host-mix)
EN_MODE = fake-ip-mix
# ENABLE_UDP_PROXY (启用 UDP 代理, 0: 禁用, 1: 启用, only for EN_MODE_TUN is nil)
# DISABLE_UDP_QUIC (禁用 UDP QUIC, 0: 启用, 1: 禁用)
DISABLE_UDP_QUIC = 0
# ROUTER_SELF_PROXY (路由器自身代理, 0: 禁用, 1: 启用)
ROUTER_SELF_PROXY = 1
# STACK_TYPE (TUN 网络栈类型, system/gvisor/mixed, default is system)
STACK_TYPE = mixed
# PROXY_MODE (代理模式, rule/global/direct, default is rule)
PROXY_MODE = rule

# --- 防火墙与访问控制 ---
# INTRANET_ALLOWED (仅允许内网访问, 0: 禁用, 1: 启用)
INTRANET_ALLOWED = 0
    # INTRANET_ALLOWED_WAN_NAME (仅允许内网时 WAN 接口列表名称)
# BYPASS_GATEWAY_COMPATIBLE (旁路网关兼容模式, 0: 禁用, 1: 启用)
BYPASS_GATEWAY_COMPATIBLE = 0
# COMMON_PORTS (绕过常用端口的端口列表, 0: 禁用 or "21 22 23 53 80 123 143 194 443 465 587 853 993 995 998 2052 2053 2082 2083 2086 2095 2096 5222 5228 5229 5230 8080 8443 8880 8888 8889")
COMMON_PORTS = 0
# --- 分流相关 ---
# CHINA_IP_ROUTE (IPv4 绕过 IP 模式, 0: 禁用, 1: 绕过大陆, 2: 回国)
CHINA_IP_ROUTE = 1
# CHINA_IP6_ROUTE (IPv6 绕过 IP 模式, 0: 禁用, 1: 绕过大陆, 2: 回国)
# CHNR_AUTO_UPDATE (大陆IP自动更新, 0: 禁用, 1: 启用)
CHNR_AUTO_UPDATE = 1
# CHNR_UPDATE_WEEK_TIME (大陆IP更新星期, 0-6 or *, 0代表星期天, *代表每天, default 0)
CHNR_UPDATE_WEEK_TIME = *
# CHNR_UPDATE_DAY_TIME (大陆IP更新小时, 0-23 or *, default 1)
CHNR_UPDATE_DAY_TIME = 0
# CHNR_CUSTOM_URL (大陆IP列表自定义更新地址, URL or default)
# CHNR6_CUSTOM_URL (大陆IPv6列表自定义更新地址, URL or default)
# CHINA_IP_ROUTE_PASS (绕过大陆 IP 时排除类别, 域名、IP or 插件内置规则, eg: services.googleapis.cn googleapis.cn 114.114.114.114)
# CHINA_IP6_ROUTE_PASS (绕过大陆 IPv6 时排除类别, 域名、IP or 插件内置规则)

# ENABLE_META_SNIFFER (启用域名嗅探, 0: 插件不覆写, 1: 启用)
ENABLE_META_SNIFFER = 1
    # ENABLE_META_SNIFFER_CUSTOM (启用自定义嗅探规则, 0: 插件不覆写, 1: 启用，使用插件内置规则)
    ENABLE_META_SNIFFER_CUSTOM = 1
    # ENABLE_META_SNIFFER_PURE_IP (强制嗅探纯 IP 连接, 0: 插件不覆写, 1: 启用)
    ENABLE_META_SNIFFER_PURE_IP = 1

# ENABLE_TCP_CONCURRENT (启用 TCP 并发, 0: 插件不覆写, 1: 启用)
ENABLE_TCP_CONCURRENT = 1
# FIND_PROCESS_MODE (进程查找模式, 0: 插件不覆写, off: 关闭, always, strict)
FIND_PROCESS_MODE = 0
# GLOBAL_CLIENT_FINGERPRINT (全局客户端指纹, none/random/chrome/firefox/safari/ios/android/edge/360/qq/0: 插件不覆写)
GLOBAL_CLIENT_FINGERPRINT = 0
# ENABLE_UNIFIED_DELAY (启用统一延迟计算, 0: 插件不覆写, 1: 启用)
ENABLE_UNIFIED_DELAY = 1

# ENABLE_RULE_PROXY (仅代理命中规则流量, 0: 禁用, 1: 启用)
ENABLE_RULE_PROXY = 1
# ENABLE_CUSTOM_CLASH_RULES (启用用户自定义规则, 0: 禁用, 1: 启用，使用插件规则)
ENABLE_CUSTOM_CLASH_RULES = 1

# TOLERANCE (URL-Test 策略组切换灵敏度, 毫秒数 or default 0 不覆写)
TOLERANCE = 30
# URLTEST_INTERVAL_MOD (测速（连通性）间隔修改, 秒数 or default 0 不覆写)
URLTEST_INTERVAL_MOD = 300
# URLTEST_ADDRESS_MOD (测速（连通性）地址修改, URL or default 0 不覆写)
# GITHUB_ADDRESS_MOD (GitHub 地址修改, URL or default 0 不覆写)

# --- 数据库加载相关 ---
# ENABLE_GEOIP_DAT (启用 GEOIP DAT 数据库, 0: 插件不覆写, 1: 启用)
ENABLE_GEOIP_DAT = 1
# GEODATA_LOADER (Geo 数据加载模式, memconservative/standard/0: 插件不覆写)
GEODATA_LOADER = 0
# GEO_AUTO_UPDATE (GeoIP MMDB 数据自动更新, 0: 禁用, 1: 启用)
GEO_AUTO_UPDATE = 1
# GEO_UPDATE_WEEK_TIME (GeoIP MMDB 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEO_UPDATE_WEEK_TIME = *
# GEO_UPDATE_DAY_TIME (GeoIP MMDB 数据更新小时, 0-23 or *, default 1)
GEO_UPDATE_DAY_TIME = 1
# GEO_CUSTOM_URL (GeoIP MMDB 数据自定义更新地址, URL or default)
# GEOIP_AUTO_UPDATE (GeoIP Dat 数据自动更新, 0: 禁用, 1: 启用)
GEOIP_AUTO_UPDATE = 1
# GEOIP_UPDATE_WEEK_TIME (GeoIP Dat 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEOIP_UPDATE_WEEK_TIME = *
# GEOIP_UPDATE_DAY_TIME (GeoIP Dat 数据更新小时, 0-23 or *, default 1)
GEOIP_UPDATE_DAY_TIME = 2
# GEOIP_CUSTOM_URL (GeoIP Dat 数据自定义更新地址, URL or default)
# GEOSITE_AUTO_UPDATE (GeoSite 数据自动更新, 0: 禁用, 1: 启用)
GEOSITE_AUTO_UPDATE = 1
# GEOSITE_UPDATE_WEEK_TIME (GeoSite 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEOSITE_UPDATE_WEEK_TIME = *
# GEOSITE_UPDATE_DAY_TIME (GeoSite 数据更新小时, 0-23 or *, default 1)
GEOSITE_UPDATE_DAY_TIME = 3
# GEOSITE_CUSTOM_URL (GeoSite 数据自定义更新地址, URL or default)
# GEOASN_AUTO_UPDATE (GeoASN 数据自动更新, 0: 禁用, 1: 启用)
GEOASN_AUTO_UPDATE = 1
# GEOASN_UPDATE_WEEK_TIME (GeoASN 数据更新日, 0-6 or *, 0代表星期天, *代表每天, default 0)
GEOASN_UPDATE_WEEK_TIME = *
# GEOASN_UPDATE_DAY_TIME (GeoASN 数据更新小时, 0-23 or *, default 1)
GEOASN_UPDATE_DAY_TIME = 4
# GEOASN_CUSTOM_URL (GeoASN 数据自定义更新地址, URL or default)

# --- 其它功能 ---
# SMALL_FLASH_MEMORY (小闪存模式, 0: 禁用, 1: 启用)
SMALL_FLASH_MEMORY = 0
# DISABLE_QUIC_GO_GSO (禁用 QUIC GO GSO, 0: 插件不覆写, 1: 启用)
DISABLE_QUIC_GO_GSO = 0
# DELAY_START (延时启动, 0: 禁用 or 秒数)
DELAY_START = 0
# SKIP_PROXY_ADDRESS (跳过代理地址, 0: 禁用, 1: 启用)
SKIP_PROXY_ADDRESS = 1
# SUB_INFO_URL (订阅信息 URL)
SUB_INFO_URL = $EN_KEY
# DOWNLOAD_FILE (下载外部文件到指定路径, need URL and path)
DOWNLOAD_FILE = url=https://raw.githubusercontent.com/Giveupmoon/OpenClash_Overwrite/refs/heads/main/Config/Overwrite-Clash-Bypass.yaml, path=/etc/openclash/config/Overwrite-Clash-Bypass.yaml, cron=0 6 * * *, force=true
# RESTART (模块更新后重启插件, true: 启用, false: 禁用)
RESTART = true

[Overwrite]
ruby_map_edit "$CONFIG_FILE" "['proxy-providers']" "provider" "['url']" "$EN_KEY"
ruby_edit "$CONFIG_FILE" "['dns']['nameserver']" "['$EN_DNS']"
